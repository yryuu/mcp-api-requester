# トラブルシューティングガイド

`make_request` ツールを使用してAPIリクエストを行う際によく発生する問題と、その解決策をまとめました。

## よくあるエラーと対処法

### 1. Connection Refused (ECONNREFUSED)

**症状:**
```json
{
  "error": "connect ECONNREFUSED 127.0.0.1:8080"
}
```

**原因:**
指定したポートでサーバーが動作していないか、ファイアウォールによって接続がブロックされています。

**解決策:**
- 接続先のサーバーが起動しているか確認してください。
- ホスト名やポート番号が正しいか再確認してください。
- `localhost` の代わりに `127.0.0.1` を試してみてください（Node.jsのバージョンによっては解決方法が変わる場合があります）。

### 2. DNS Lookup Failed (ENOTFOUND)

**症状:**
```json
{
  "error": "getaddrinfo ENOTFOUND api.example.com"
}
```

**原因:**
ドメイン名が存在しないか、DNS解決に失敗しました。

**解決策:**
- URLのホスト名（ドメイン部分）にタイプミスがないか確認してください。
- インターネット接続を確認してください。

### 3. SSL/TLS Error

**症状:**
```json
{
  "error": "self signed certificate"
}
```

**原因:**
接続先が自己署名証明書（オレオレ証明書）を使用している場合など、SSL証明書の検証に失敗しました。

**解決策:**
- 現在の実装では、セキュリティのためSSL証明書の検証を無効にするオプションは提供していません。接続先が正しい信頼できる証明書を使用しているか確認してください。
- 開発環境であれば、証明書をOSの信頼済みストアに追加することで解決する場合があります。

### 4. 404 Not Found や 500 Internal Server Error

**症状:**
エラーではなく、通常のレスポンスとして返ってきます。
```json
{
  "status": 404,
  "statusText": "Not Found",
  ...
}
```

**原因:**
リクエストはサーバーに到達しましたが、サーバー側でページが見つからないか、エラーが発生しました。

**解決策:**
- URLのパスが正しいか確認してください。
- `POST`リクエストの場合、`Content-Type`ヘッダーや`body`の形式がAPIの仕様と合っているか確認してください。
- サーバー側のログを確認できる場合は、そちらを確認してください。

## デバッグ方法

問題が解決しない場合、手動テストスクリプトを実行して詳細なエラーを確認することをお勧めします。

```bash
# プロジェクトのディレクトリで実行
npm test
```

または、`curl` コマンドを使って同じURLにリクエストを送り、問題がMCPサーバーにあるのか、接続先にあるのかを切り分けます。
